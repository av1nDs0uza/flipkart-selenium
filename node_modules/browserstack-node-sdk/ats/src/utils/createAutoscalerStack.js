const a24_0x15cde3=a24_0x1d26;(function(_0x271cc6,_0x17d7ca){const _0x803fd2=a24_0x1d26,_0x461cee=_0x271cc6();while(!![]){try{const _0x313363=parseInt(_0x803fd2(0xc5))/0x1+-parseInt(_0x803fd2(0xbb))/0x2+parseInt(_0x803fd2(0xb2))/0x3+parseInt(_0x803fd2(0xd5))/0x4+parseInt(_0x803fd2(0xce))/0x5*(parseInt(_0x803fd2(0xcf))/0x6)+parseInt(_0x803fd2(0xad))/0x7+-parseInt(_0x803fd2(0xa2))/0x8*(parseInt(_0x803fd2(0xca))/0x9);if(_0x313363===_0x17d7ca)break;else _0x461cee['push'](_0x461cee['shift']());}catch(_0x4fee99){_0x461cee['push'](_0x461cee['shift']());}}}(a24_0x8205,0xad44c));function a24_0x8205(){const _0x1727e4=['join','jtqZG','3685493ETAmiA','browserstack:cluster','nuttk','bluebird','moEAC','3996030SdPion','StackName','Tags','Value','toString','CloudFormation','TemplateBody','DELETE','apiVersion','328150YVoRLD','EIxWt','promise','Resources','voBrx','Capabilities','./AWSUtils','readFileAsync','Parameters','iUNUV','616131DNlcam','UaeBh','OnFailure','StackId','autoscaler-role-creation.yaml','19132407LiRRWK','path','browserstack:creationDate','awsObj','1645870XqHkRL','6XzdTAx','ClusterName','Properties','promisifyAll','push','templates','783168ACZywD','schema','createAutoscalerStack','JpiqT','ZCNSQ','8rEyWAO','valueOf','debug','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','stackCreateComplete','stringify','Key','../config/logger','2010-05-15'];a24_0x8205=function(){return _0x1727e4;};return a24_0x8205();}const fs=require('fs'),path=require(a24_0x15cde3(0xcb)),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require('js-yaml-cloudformation-schema'),Promise=require(a24_0x15cde3(0xb0)),AWS=require(a24_0x15cde3(0xc1))[a24_0x15cde3(0xcd)],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require('../config/constants'),{logger}=require(a24_0x15cde3(0xa9));function a24_0x1d26(_0x436b89,_0x1c21b2){const _0x8205d7=a24_0x8205();return a24_0x1d26=function(_0x1d26c8,_0x390a17){_0x1d26c8=_0x1d26c8-0xa2;let _0x1c75fe=_0x8205d7[_0x1d26c8];return _0x1c75fe;},a24_0x1d26(_0x436b89,_0x1c21b2);}Promise[a24_0x15cde3(0xd2)](fs),addAutoscalerTags=async(_0x419379,_0x522851,_0x37154a)=>{const _0x537722=a24_0x15cde3;for(let _0x357c94 in _0x419379['Resources']){_0x419379['Resources'][_0x357c94][_0x537722(0xd1)]&&_0x419379['Resources'][_0x357c94][_0x537722(0xd1)][_0x537722(0xb4)]&&_0x419379[_0x537722(0xbe)][_0x357c94][_0x537722(0xd1)]['Tags'][_0x537722(0xd3)](..._0x37154a);}},exports[a24_0x15cde3(0xd7)]=async _0x257cd5=>{const _0x44c0ef=a24_0x15cde3,_0x1478c4={'UaeBh':_0x44c0ef(0xae),'JpiqT':_0x44c0ef(0xcc),'HGjZy':_0x44c0ef(0xaa),'jtqZG':_0x44c0ef(0xd4),'ZCNSQ':_0x44c0ef(0xc9),'voBrx':'utf-8','iUNUV':function(_0x2c8489,_0x57497b,_0x174519,_0x365505){return _0x2c8489(_0x57497b,_0x174519,_0x365505);},'EIxWt':_0x44c0ef(0xb9),'nuttk':_0x44c0ef(0xd0),'moEAC':'CAPABILITY_NAMED_IAM','rrDdk':_0x44c0ef(0xa6)},_0x471b60=COMMON_HST_TAGS,_0x232b33={};_0x232b33[_0x44c0ef(0xa8)]=_0x1478c4[_0x44c0ef(0xc6)],_0x232b33[_0x44c0ef(0xb5)]=_0x257cd5,_0x471b60[_0x44c0ef(0xd3)](_0x232b33),_0x471b60['push']({'Key':_0x1478c4[_0x44c0ef(0xd8)],'Value':new Date()[_0x44c0ef(0xa3)]()[_0x44c0ef(0xb6)]()});const _0x3e1940={};_0x3e1940[_0x44c0ef(0xba)]=_0x1478c4['HGjZy'];const _0x475837=new AWS[(_0x44c0ef(0xb7))](_0x3e1940),_0x24016b=await fs[_0x44c0ef(0xc2)](path[_0x44c0ef(0xab)](__dirname,'..',_0x1478c4[_0x44c0ef(0xac)],_0x1478c4[_0x44c0ef(0xd9)]),_0x1478c4[_0x44c0ef(0xbf)]),_0x352879={};_0x352879[_0x44c0ef(0xd6)]=CLOUDFORMATION_SCHEMA;const _0x5f2c81=yaml['load'](_0x24016b,_0x352879);_0x1478c4[_0x44c0ef(0xc4)](addAutoscalerTags,_0x5f2c81,_0x257cd5,_0x471b60);const _0xc3d281=JSON[_0x44c0ef(0xa7)](_0x5f2c81),_0x35285a={};_0x35285a[_0x44c0ef(0xb3)]=CLUSTER_AUTOSCALER_STACK_NAME,_0x35285a[_0x44c0ef(0xc7)]=_0x1478c4[_0x44c0ef(0xbc)],_0x35285a[_0x44c0ef(0xb8)]=_0xc3d281,_0x35285a[_0x44c0ef(0xc3)]=[{'ParameterKey':_0x1478c4[_0x44c0ef(0xaf)],'ParameterValue':_0x257cd5}],_0x35285a[_0x44c0ef(0xc0)]=[_0x1478c4[_0x44c0ef(0xb1)]],_0x35285a[_0x44c0ef(0xb4)]=_0x471b60;const _0x1c8636=_0x35285a,_0x567114=await _0x475837['createStack'](_0x1c8636)[_0x44c0ef(0xbd)]();logger[_0x44c0ef(0xa4)](_0x44c0ef(0xa5));const _0x572c6b={};return _0x572c6b[_0x44c0ef(0xb3)]=_0x567114[_0x44c0ef(0xc8)],_0x475837['waitFor'](_0x1478c4['rrDdk'],_0x572c6b)[_0x44c0ef(0xbd)]();};