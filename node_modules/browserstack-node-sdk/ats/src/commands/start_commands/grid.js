const a17_0xad0fa6=a17_0x4c07;(function(_0x549d4f,_0x6d32c5){const _0x4fc3fe=a17_0x4c07,_0x4cac68=_0x549d4f();while(!![]){try{const _0x1d5965=parseInt(_0x4fc3fe(0x124))/0x1*(parseInt(_0x4fc3fe(0x10a))/0x2)+parseInt(_0x4fc3fe(0x112))/0x3*(-parseInt(_0x4fc3fe(0xd0))/0x4)+parseInt(_0x4fc3fe(0x125))/0x5+parseInt(_0x4fc3fe(0xe5))/0x6+parseInt(_0x4fc3fe(0x108))/0x7*(-parseInt(_0x4fc3fe(0x113))/0x8)+parseInt(_0x4fc3fe(0x10f))/0x9+parseInt(_0x4fc3fe(0xe8))/0xa*(parseInt(_0x4fc3fe(0xf7))/0xb);if(_0x1d5965===_0x6d32c5)break;else _0x4cac68['push'](_0x4cac68['shift']());}catch(_0x3970b7){_0x4cac68['push'](_0x4cac68['shift']());}}}(a17_0xf9c3,0x26b75));function a17_0xf9c3(){const _0x137666=['<UsernamePlaceholder>','stack','gdPBf','hEoWF','bstackAccesskey','bstackUsername','Start\x20an\x20existing\x20Automation\x20grid.','PfozZ','RVyYz','stringify','7ljEtni','cloudProvider','271418shgBLF','handler','epilogue','statusCode','exit','637515HiMTlk','zOFdr','PMTZS','3ibuxJB','2209592JFfkcp','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','<PasswordPlaceholder>','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','type','info','builder','xHLdt','../../utils/instrumentationUtils','gyvei','Browserstack','ZOfeN','WebSocket','start-grid-called','usage','clusterName','SsIDZ','1vEQkJI','711180RNqNlT','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','kMXBt','body','../../utils/createk8sClient','../../cloudproviders/utils','397652KNqEfu','QyoAS','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','debug','readFileSync','JZumf','clusterRegion','region','../../config/constants','lisLQ','error','zAYWK','Adding\x20Websocket\x20listeners','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','help','name','string','uigCY','kqDUf','uCUZe','init-not-called','59832BYaIhi','fetchLocalCreds','gridId','10arGYYL','grid','description','replace','parse','grid-id','YAamr','argv','ERROR','unauthorised','../../utils/webSocketUtils','Starting\x20grid\x20','Iuyiu','existsSync','VbwFa','1929851OEfgMs','tTzOK','username','addListeners','FoolL','options','desc'];a17_0xf9c3=function(){return _0x137666;};return a17_0xf9c3();}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require('reconnecting-websocket'),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a17_0xad0fa6(0xd8)),{logger}=require('../../config/logger'),{getCredentialsPath,getGridDetails}=require('../../utils/utilityMethods'),{scaleUpHubDeployment}=require('../../utils/gridComponents'),{sendInstrumentationEvent}=require(a17_0xad0fa6(0x11b)),webSocketUtils=require(a17_0xad0fa6(0xf2)),{createK8sClient}=require(a17_0xad0fa6(0x129)),{getCloudProviderObject}=require(a17_0xad0fa6(0xcf));function a17_0x4c07(_0x17b0eb,_0x550bb5){const _0xf9c344=a17_0xf9c3();return a17_0x4c07=function(_0x4c0784,_0x1711aa){_0x4c0784=_0x4c0784-0xcf;let _0x49ea3f=_0xf9c344[_0x4c0784];return _0x49ea3f;},a17_0x4c07(_0x17b0eb,_0x550bb5);}exports['command']=a17_0xad0fa6(0xe9),exports[a17_0xad0fa6(0xfd)]=a17_0xad0fa6(0x104),exports[a17_0xad0fa6(0x119)]=function(_0x44e124){const _0x1093d2=a17_0xad0fa6,_0x96128a={};_0x96128a[_0x1093d2(0xd9)]='Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.',_0x96128a['JZumf']=_0x1093d2(0xe0),_0x96128a[_0x1093d2(0x111)]='help';const _0x40158f=_0x96128a,_0x28f7c8={};_0x28f7c8[_0x1093d2(0xea)]=_0x40158f[_0x1093d2(0xd9)],_0x28f7c8[_0x1093d2(0x117)]=_0x40158f[_0x1093d2(0xd5)];const _0x54b873={};return _0x54b873[_0x1093d2(0xed)]=_0x28f7c8,_0x44e124[_0x1093d2(0x121)](HELP_HEADER_MESSAGE['start'])[_0x1093d2(0x10c)](HELP_FOOTER_MESSAGE)[_0x1093d2(0xfc)](_0x54b873)[_0x1093d2(0xde)](_0x40158f[_0x1093d2(0x111)])[_0x1093d2(0xef)];},exports[a17_0xad0fa6(0x10b)]=async function(_0x36603e){const _0x373cb7=a17_0xad0fa6,_0x5d841d={'zOFdr':_0x373cb7(0x114),'zAYWK':function(_0x5df3b5){return _0x5df3b5();},'xHLdt':_0x373cb7(0xdd),'SsIDZ':function(_0x28a164,_0x32ae31,_0x1196bc,_0x13fd17,_0x3d514a,_0x3f4afd,_0x150fe4){return _0x28a164(_0x32ae31,_0x1196bc,_0x13fd17,_0x3d514a,_0x3f4afd,_0x150fe4);},'uigCY':_0x373cb7(0x120),'YAamr':_0x373cb7(0xe4),'PfozZ':_0x373cb7(0xfe),'pWhHp':_0x373cb7(0x115),'hEoWF':_0x373cb7(0xdc),'uCUZe':function(_0x46450d,_0x476423,_0x41f26a,_0x18a386){return _0x46450d(_0x476423,_0x41f26a,_0x18a386);},'kqDUf':function(_0x7cff2b,_0x35ef31,_0x55dc4f,_0x17002e,_0x4f28a9,_0x1e1ea0){return _0x7cff2b(_0x35ef31,_0x55dc4f,_0x17002e,_0x4f28a9,_0x1e1ea0);},'FoolL':function(_0x562549,_0x27bb1a){return _0x562549(_0x27bb1a);},'VbwFa':function(_0x236ee1,_0xbef2ed,_0x58a5b3){return _0x236ee1(_0xbef2ed,_0x58a5b3);},'tTzOK':'Grid\x20started','ZOfeN':function(_0x19b637,_0xe9210e){return _0x19b637===_0xe9210e;},'gdPBf':function(_0x5e6ee3,_0x3bb646,_0x3ad1ee,_0x13399d,_0x431add,_0x21253f,_0x5741ba){return _0x5e6ee3(_0x3bb646,_0x3ad1ee,_0x13399d,_0x431add,_0x21253f,_0x5741ba);},'QyoAS':_0x373cb7(0xf1),'kMXBt':function(_0x279255,_0x48b674){return _0x279255===_0x48b674;},'Iuyiu':'invalid-grid-id','RVyYz':function(_0x25bc44,_0x4210a5,_0x42ca16,_0x17b325,_0x2de206,_0x1ca3da,_0x249a62){return _0x25bc44(_0x4210a5,_0x42ca16,_0x17b325,_0x2de206,_0x1ca3da,_0x249a62);},'gyvei':'server-error'};let _0x54a8c2;try{!_0x36603e[_0x373cb7(0xe7)]&&(logger['error'](_0x5d841d[_0x373cb7(0x110)]),process['exit'](0x1));!fs[_0x373cb7(0xf5)](_0x5d841d[_0x373cb7(0xdb)](getCredentialsPath))&&(logger['error'](_0x5d841d[_0x373cb7(0x11a)]),await _0x5d841d[_0x373cb7(0x123)](sendInstrumentationEvent,_0x36603e,_0x5d841d[_0x373cb7(0xe1)],messageTypes[_0x373cb7(0xf0)],_0x5d841d[_0x373cb7(0xee)],null,_0x36603e),process['exit'](0x1));logger[_0x373cb7(0x118)](_0x373cb7(0xf3)+_0x36603e[_0x373cb7(0xe7)]),await _0x5d841d['SsIDZ'](sendInstrumentationEvent,_0x36603e,_0x5d841d[_0x373cb7(0xe1)],messageTypes['INFO'],null,null,_0x36603e);const _0x47fecb=JSON[_0x373cb7(0xec)](fs[_0x373cb7(0xd4)](_0x5d841d[_0x373cb7(0xdb)](getCredentialsPath)));global_registry[_0x373cb7(0x103)]=_0x47fecb[_0x373cb7(0x11d)][_0x373cb7(0xf9)],global_registry[_0x373cb7(0x102)]=_0x47fecb[_0x373cb7(0x11d)]['password'];const _0xdb4e41=WS_ENDPOINT[_0x373cb7(0xeb)](_0x5d841d[_0x373cb7(0x105)],_0x47fecb['Browserstack'][_0x373cb7(0xf9)])[_0x373cb7(0xeb)](_0x5d841d['pWhHp'],_0x47fecb[_0x373cb7(0x11d)]['password']),_0x133625={};_0x133625[_0x373cb7(0x11f)]=ws,_0x133625['connectionTimeout']=0x36ee80,_0x54a8c2=new ReconnectingWebSocket(_0xdb4e41,[],_0x133625),logger[_0x373cb7(0xd3)](_0x5d841d[_0x373cb7(0x101)]),webSocketUtils[_0x373cb7(0xfa)](_0x54a8c2,_0x36603e['user'],_0x36603e['password']);const [_0x3bd22d,_0x143222]=await _0x5d841d[_0x373cb7(0xe3)](getGridDetails,_0x47fecb['Browserstack'][_0x373cb7(0xf9)],_0x47fecb[_0x373cb7(0x11d)]['password'],_0x36603e[_0x373cb7(0xe7)]);if(_0x143222){const _0x2dc07b=_0x143222[_0x373cb7(0x118)];global_registry[_0x373cb7(0x109)]=_0x2dc07b[_0x373cb7(0x109)],global_registry[_0x373cb7(0xd6)]=_0x2dc07b[_0x373cb7(0xd7)],global_registry['clusterName']=_0x2dc07b[_0x373cb7(0x122)];const _0x24d771=_0x5d841d[_0x373cb7(0xe2)](getCloudProviderObject,_0x2dc07b[_0x373cb7(0x109)],_0x2dc07b[_0x373cb7(0x122)],_0x2dc07b[_0x373cb7(0xdf)],_0x54a8c2,webSocketUtils),_0x29d6a8=_0x47fecb[_0x373cb7(0x109)]||{};await _0x24d771[_0x373cb7(0xe6)](_0x29d6a8),_0x24d771['configureIfNotConfigured']();const [_0x46ebef,_0x407e1a,_0x250522,_0xba8a5f,_0x43416c,_0x98f685]=await _0x5d841d[_0x373cb7(0xfb)](createK8sClient,_0x24d771);await _0x5d841d[_0x373cb7(0xf6)](scaleUpHubDeployment,_0x407e1a,_0x2dc07b['name']),logger[_0x373cb7(0x118)](_0x5d841d[_0x373cb7(0xf8)]),process[_0x373cb7(0x10e)](0x0);}_0x5d841d[_0x373cb7(0x11e)](_0x3bd22d[_0x373cb7(0x10d)],0x191)&&(logger[_0x373cb7(0xda)](_0x373cb7(0xd2)),await _0x5d841d[_0x373cb7(0x100)](sendInstrumentationEvent,_0x36603e,_0x5d841d[_0x373cb7(0xe1)],messageTypes['ERROR'],_0x5d841d[_0x373cb7(0xd1)],null,_0x36603e),process['exit'](0x1)),_0x5d841d[_0x373cb7(0x127)](_0x3bd22d[_0x373cb7(0x10d)],0x190)&&(logger['error'](JSON[_0x373cb7(0xec)](_0x3bd22d[_0x373cb7(0x128)])['message']),await _0x5d841d[_0x373cb7(0x100)](sendInstrumentationEvent,_0x36603e,_0x5d841d[_0x373cb7(0xe1)],messageTypes[_0x373cb7(0xf0)],_0x5d841d[_0x373cb7(0xf4)],null,_0x36603e),process[_0x373cb7(0x10e)](0x1)),logger[_0x373cb7(0xda)](_0x373cb7(0x126)+JSON[_0x373cb7(0x107)](_0x3bd22d)),await _0x5d841d[_0x373cb7(0x106)](sendInstrumentationEvent,_0x36603e,_0x5d841d[_0x373cb7(0xe1)],messageTypes['ERROR'],_0x5d841d[_0x373cb7(0x11c)],_0x3bd22d,_0x36603e),process[_0x373cb7(0x10e)](0x1);}catch(_0x2fd1a3){const _0x57579f=_0x373cb7(0x116)+_0x2fd1a3+'\x20\x0a'+JSON[_0x373cb7(0x107)](_0x2fd1a3[_0x373cb7(0xff)])+'\x20';logger[_0x373cb7(0xda)](_0x57579f),process[_0x373cb7(0x10e)](0x1);}};