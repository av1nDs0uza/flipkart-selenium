const a12_0x400404=a12_0x2750;function a12_0x42d6(){const _0x4ea658=['BROWSERSTACK_USERNAME','vqvTv','tPasj','bzJUf','xCdCX','existsSync','epilogue','Browserstack','argv','wtFDg','VyfSy','debug','113756ZNNDno','XLTpj','BROWSERSTACK_ACCESS_KEY','4veHIcu','186068Zufhlb','ljUmJ','bstackUsername','string','requestId','NQvGK','nSvBL','../utils/utilityMethods','TVpiZ','RDino','zqByk','command','tgNbK','FuuSP','wrong-creds','ovSwN','qnSem','type','40707ONobEE','options','../utils/userInput','sysyA','JHIQb','szPZC','rPLhG','Use\x20corresponding\x20access-key\x20to\x20configure\x20the\x20CLI\x20for\x20future\x20actions.','fGrbB','tdgwc','LNGmZ','CiAiU','VWPMz','1148120smdqDM','mkdirSync','init','trJDd','zxOIs','bstackAccesskey','NmUxa','ksTWH','env','416EGJTcb','AOSSj','GCoom','dvhIP','VzNPs','240URuFmL','4058561CdisYy','yHGUU','parse','usage','Initialise\x20the\x20BrowserStack\x20CLI\x20with\x20appropriate\x20credentials.','KArhQ','bstack-username','WHXZs','strict','readFileSync','zUXMI','statusCode','Yduun','vUytv','9UYIvVP','stringify','utf-8','exit','ecebi','fYrem','63413GFizZD','bstack-accesskey','MJyJQ','CbIqQ','RZwes','password','126OmXXlX','trEwQ','12qzuTXc','BrowserStack\x20username\x20and\x20password\x20neither\x20passed\x20in\x20command\x20line\x20arguments\x20nor\x20set\x20as\x20environment\x20variables.\x20Raising\x20a\x20prompt\x20to\x20get\x20the\x20details.','PDXmA','DICAY','error','desc','../config/logger','IrNBS','Use\x20username\x20to\x20configure\x20the\x20CLI\x20for\x20future\x20actions.','util','recommendCommands','46651mFMkxW','jrQST','got','GET','writeFileSync','help','INFO','username','builder','description','MNhxV','qimXe'];a12_0x42d6=function(){return _0x4ea658;};return a12_0x42d6();}(function(_0x143063,_0x370841){const _0x1b9acf=a12_0x2750,_0x456859=_0x143063();while(!![]){try{const _0x1f6062=parseInt(_0x1b9acf(0x13b))/0x1+-parseInt(_0x1b9acf(0x137))/0x2*(-parseInt(_0x1b9acf(0x106))/0x3)+-parseInt(_0x1b9acf(0x13a))/0x4*(-parseInt(_0x1b9acf(0xe9))/0x5)+parseInt(_0x1b9acf(0x112))/0x6*(parseInt(_0x1b9acf(0x10c))/0x7)+parseInt(_0x1b9acf(0xf2))/0x8*(-parseInt(_0x1b9acf(0x14d))/0x9)+parseInt(_0x1b9acf(0xf7))/0xa*(-parseInt(_0x1b9acf(0x11f))/0xb)+parseInt(_0x1b9acf(0x114))/0xc*(-parseInt(_0x1b9acf(0xf8))/0xd);if(_0x1f6062===_0x370841)break;else _0x456859['push'](_0x456859['shift']());}catch(_0x14e3dc){_0x456859['push'](_0x456859['shift']());}}}(a12_0x42d6,0x1f19c));const fs=require('fs'),util=require(a12_0x400404(0x11d)),got=require(a12_0x400404(0x121)),{v4:uuidv4}=require('uuid'),{logger}=require(a12_0x400404(0x11a)),{inputBstackKeys}=require(a12_0x400404(0x14f)),{BS_API_URL,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,global_registry,messageTypes}=require('../config/constants'),{getDirForConfig,getCredentialsPath,getAuthHeader}=require(a12_0x400404(0x142)),{sendInstrumentationEvent}=require('../utils/instrumentationUtils');function a12_0x2750(_0xda934c,_0x9cec0f){const _0x42d61b=a12_0x42d6();return a12_0x2750=function(_0x2750d3,_0x7b1d5b){_0x2750d3=_0x2750d3-0xe4;let _0x3877ea=_0x42d61b[_0x2750d3];return _0x3877ea;},a12_0x2750(_0xda934c,_0x9cec0f);}exports[a12_0x400404(0x146)]=a12_0x400404(0xeb),exports[a12_0x400404(0x119)]=a12_0x400404(0xfc),exports[a12_0x400404(0x127)]=function(_0x26bf9b){const _0x4ada7d=a12_0x400404,_0x3045f6={};_0x3045f6[_0x4ada7d(0x12d)]=_0x4ada7d(0x11c),_0x3045f6[_0x4ada7d(0x104)]='string',_0x3045f6[_0x4ada7d(0xe7)]=_0x4ada7d(0x154),_0x3045f6[_0x4ada7d(0xff)]=_0x4ada7d(0x124);const _0x385f8b=_0x3045f6,_0x47bfbe={};_0x47bfbe[_0x4ada7d(0x128)]=_0x385f8b[_0x4ada7d(0x12d)],_0x47bfbe[_0x4ada7d(0x14c)]=_0x385f8b[_0x4ada7d(0x104)];const _0x4ae5ff={};_0x4ae5ff[_0x4ada7d(0x128)]=_0x385f8b[_0x4ada7d(0xe7)],_0x4ae5ff[_0x4ada7d(0x14c)]=_0x385f8b[_0x4ada7d(0x104)];const _0x3ed85f={};return _0x3ed85f[_0x4ada7d(0xfe)]=_0x47bfbe,_0x3ed85f[_0x4ada7d(0x10d)]=_0x4ae5ff,_0x26bf9b['usage'](HELP_HEADER_MESSAGE[_0x4ada7d(0xeb)])[_0x4ada7d(0x131)](HELP_FOOTER_MESSAGE)[_0x4ada7d(0x14e)](_0x3ed85f)[_0x4ada7d(0x11e)]()[_0x4ada7d(0x100)]()[_0x4ada7d(0x124)](_0x385f8b[_0x4ada7d(0xff)])[_0x4ada7d(0x133)];},exports['handler']=async function(_0x52d7e9){const _0x1dbffb=a12_0x400404,_0x28fc7d={'vqvTv':_0x1dbffb(0x108),'jrQST':function(_0x58ba01){return _0x58ba01();},'zqByk':'Use\x20username\x20to\x20configure\x20the\x20CLI\x20for\x20future\x20actions.','ksTWH':_0x1dbffb(0x13e),'UcYWh':_0x1dbffb(0x154),'JHIQb':_0x1dbffb(0x124),'XmVxL':function(_0x38fa07,_0x52b537,_0x31d24c,_0x43e42c,_0x236012,_0x48d55a,_0x24e0b4){return _0x38fa07(_0x52b537,_0x31d24c,_0x43e42c,_0x236012,_0x48d55a,_0x24e0b4);},'TVpiZ':'init-called','wtFDg':function(_0x410116,_0xa79dfe){return _0x410116===_0xa79dfe;},'qimXe':_0x1dbffb(0x141),'RZwes':_0x1dbffb(0x105),'vwuRm':_0x1dbffb(0x144),'szPZC':_0x1dbffb(0xf3),'MJyJQ':function(_0x26b6e2,_0x3e2a97){return _0x26b6e2===_0x3e2a97;},'trJDd':_0x1dbffb(0x11b),'ovSwN':function(_0x143b74,_0x34c566){return _0x143b74===_0x34c566;},'dvhIP':_0x1dbffb(0x129),'CbIqQ':_0x1dbffb(0xed),'tgNbK':_0x1dbffb(0xf9),'XLTpj':'kGEWp','NQvGK':function(_0x4f95f1,_0xe9eeca){return _0x4f95f1===_0xe9eeca;},'qnSem':function(_0xf0be22,_0x220a8a){return _0xf0be22!==_0x220a8a;},'fGrbB':'unwix','FuuSP':_0x1dbffb(0x12e),'tdgwc':_0x1dbffb(0x115),'xCdCX':function(_0x54f68c){return _0x54f68c();},'NmUxa':_0x1dbffb(0x122),'ljUmJ':function(_0x189f34,_0x385953,_0x21aefc){return _0x189f34(_0x385953,_0x21aefc);},'zDDGv':function(_0x5f25a0,_0x90e36a,_0x69dbfb){return _0x5f25a0(_0x90e36a,_0x69dbfb);},'VzNPs':function(_0x2fb3e9,_0x344f28){return _0x2fb3e9!==_0x344f28;},'fYrem':function(_0x3362c6,_0x1c9a65){return _0x3362c6!==_0x1c9a65;},'VWPMz':'hQhJQ','ecebi':function(_0x2dabe9,_0x2410b2){return _0x2dabe9===_0x2410b2;},'trEwQ':_0x1dbffb(0x153),'zUXMI':_0x1dbffb(0xfd),'eGqJL':function(_0x42def6){return _0x42def6();},'LNGmZ':function(_0xe86e92,_0x458c34){return _0xe86e92===_0x458c34;},'PDXmA':_0x1dbffb(0x135),'sGjgP':'Wrong\x20credentials\x20passed.\x20Please\x20try\x20again\x20with\x20correct\x20credentials!','GCoom':function(_0x28603e,_0x30b2cb,_0x22a568,_0x31855d,_0x541534,_0x3047cc,_0x44625d){return _0x28603e(_0x30b2cb,_0x22a568,_0x31855d,_0x541534,_0x3047cc,_0x44625d);},'FUyvf':_0x1dbffb(0x149),'DICAY':function(_0x447185,_0x58b5a9,_0x45e67f,_0x59162b,_0x4ef7a3,_0x316f7e,_0x194462){return _0x447185(_0x58b5a9,_0x45e67f,_0x59162b,_0x4ef7a3,_0x316f7e,_0x194462);},'sysyA':'unknown-error'};try{global_registry[_0x1dbffb(0x13f)]=_0x28fc7d[_0x1dbffb(0x120)](uuidv4),_0x28fc7d['XmVxL'](sendInstrumentationEvent,_0x52d7e9,_0x28fc7d[_0x1dbffb(0x143)],messageTypes[_0x1dbffb(0x125)],null,null,_0x52d7e9);const _0x3eaa3b=_0x28fc7d['jrQST'](getDirForConfig);!fs['existsSync'](_0x3eaa3b)&&(_0x28fc7d[_0x1dbffb(0x134)](_0x28fc7d[_0x1dbffb(0x12a)],_0x28fc7d[_0x1dbffb(0x110)])?_0x5aa66e=_0x122885['env']['BROWSERSTACK_ACCESS_KEY']:fs[_0x1dbffb(0xea)](_0x3eaa3b));let _0x1ac2fa,_0x231739;process['env'][_0x1dbffb(0x12b)]&&(_0x28fc7d['wtFDg'](_0x28fc7d['vwuRm'],_0x28fc7d[_0x1dbffb(0x152)])?_0x44cbc5=!![]:_0x1ac2fa=process[_0x1dbffb(0xf1)]['BROWSERSTACK_USERNAME']);process['env']['BROWSERSTACK_ACCESS_KEY']&&(_0x28fc7d['MJyJQ'](_0x28fc7d['trJDd'],_0x28fc7d[_0x1dbffb(0xec)])?_0x231739=process[_0x1dbffb(0xf1)][_0x1dbffb(0x139)]:_0x91f6b6['mkdirSync'](_0x5b5e08));_0x52d7e9[_0x1dbffb(0x13d)]&&(_0x28fc7d[_0x1dbffb(0x14a)](_0x28fc7d[_0x1dbffb(0xf5)],_0x28fc7d[_0x1dbffb(0x10f)])?_0x1da74e=_0x1ccb3b['env']['BROWSERSTACK_USERNAME']:_0x1ac2fa=_0x52d7e9[_0x1dbffb(0x13d)]);_0x52d7e9[_0x1dbffb(0xee)]&&(_0x28fc7d[_0x1dbffb(0x10e)](_0x28fc7d[_0x1dbffb(0x147)],_0x28fc7d[_0x1dbffb(0x138)])?_0x4e4c1c=_0x4ad120['parse'](_0xd961a[_0x1dbffb(0x101)](_0x33a09b,_0x28fc7d[_0x1dbffb(0x12c)])):_0x231739=_0x52d7e9[_0x1dbffb(0xee)]);if(_0x28fc7d['NQvGK'](_0x1ac2fa,undefined)||_0x28fc7d[_0x1dbffb(0x14a)](_0x231739,undefined)){if(_0x28fc7d[_0x1dbffb(0x14b)](_0x28fc7d[_0x1dbffb(0xe4)],_0x28fc7d[_0x1dbffb(0x148)])){logger[_0x1dbffb(0x136)](_0x28fc7d[_0x1dbffb(0xe5)]);const [_0x39e8f1,_0x55c1ce]=await _0x28fc7d[_0x1dbffb(0x12f)](inputBstackKeys);_0x1ac2fa=_0x39e8f1,_0x231739=_0x55c1ce;}else{let _0x277a8d={};const _0x373617=_0x28fc7d['jrQST'](_0x518bb5);_0x52723e[_0x1dbffb(0x130)](_0x373617)&&(_0x277a8d=_0x397bab[_0x1dbffb(0xfa)](_0x337923['readFileSync'](_0x373617,_0x28fc7d[_0x1dbffb(0x12c)])));const _0x4b5529={};_0x4b5529[_0x1dbffb(0x126)]=_0x2dd149,_0x4b5529[_0x1dbffb(0x111)]=_0x3451eb,_0x277a8d[_0x1dbffb(0x132)]=_0x4b5529,_0x465bc1[_0x1dbffb(0x123)](_0x373617,_0xb45c8[_0x1dbffb(0x107)](_0x277a8d)),_0x41ee25[_0x1dbffb(0x109)](0x0);}}let _0xc55663=![];const _0x285d8d='https://'+_0x1ac2fa+':'+_0x231739+'@'+BS_API_URL+'/automate/plan.json',_0x56250b={'method':_0x28fc7d[_0x1dbffb(0xef)],'headers':_0x28fc7d[_0x1dbffb(0x13c)](getAuthHeader,_0x1ac2fa,_0x231739)},_0x1bb83c=await _0x28fc7d['zDDGv'](got,_0x285d8d,_0x56250b);if(_0x28fc7d[_0x1dbffb(0x14b)](_0x1bb83c,null)&&_0x28fc7d[_0x1dbffb(0xf6)](_0x1bb83c,undefined)&&_0x28fc7d[_0x1dbffb(0x140)](_0x1bb83c[_0x1dbffb(0x103)],0xc8)){if(_0x28fc7d[_0x1dbffb(0x10b)](_0x28fc7d[_0x1dbffb(0xe8)],_0x28fc7d[_0x1dbffb(0xe8)])){const _0x3464c9={};_0x3464c9[_0x1dbffb(0x128)]=_0x28fc7d[_0x1dbffb(0x145)],_0x3464c9[_0x1dbffb(0x14c)]=_0x28fc7d[_0x1dbffb(0xf0)];const _0x59ba49={};_0x59ba49['description']=_0x28fc7d['UcYWh'],_0x59ba49[_0x1dbffb(0x14c)]=_0x28fc7d['ksTWH'];const _0x3741ab={};return _0x3741ab[_0x1dbffb(0xfe)]=_0x3464c9,_0x3741ab[_0x1dbffb(0x10d)]=_0x59ba49,_0x4c842a[_0x1dbffb(0xfb)](_0x342307[_0x1dbffb(0xeb)])['epilogue'](_0xc4dc2b)[_0x1dbffb(0x14e)](_0x3741ab)[_0x1dbffb(0x11e)]()['strict']()[_0x1dbffb(0x124)](_0x28fc7d[_0x1dbffb(0x151)])[_0x1dbffb(0x133)];}else _0xc55663=!![];}if(_0xc55663){if(_0x28fc7d[_0x1dbffb(0x10a)](_0x28fc7d[_0x1dbffb(0x113)],_0x28fc7d[_0x1dbffb(0x102)]))_0x518cd2=_0x295e29[_0x1dbffb(0xee)];else{let _0x2d0aa9={};const _0x1e3d42=_0x28fc7d['eGqJL'](getCredentialsPath);fs[_0x1dbffb(0x130)](_0x1e3d42)&&(_0x28fc7d[_0x1dbffb(0xe6)](_0x28fc7d[_0x1dbffb(0x116)],_0x28fc7d[_0x1dbffb(0x116)])?_0x2d0aa9=JSON[_0x1dbffb(0xfa)](fs['readFileSync'](_0x1e3d42,_0x28fc7d[_0x1dbffb(0x12c)])):_0x5ef7ed=_0x2c9740[_0x1dbffb(0x13d)]);const _0x4a1828={};_0x4a1828[_0x1dbffb(0x126)]=_0x1ac2fa,_0x4a1828[_0x1dbffb(0x111)]=_0x231739,_0x2d0aa9[_0x1dbffb(0x132)]=_0x4a1828,fs[_0x1dbffb(0x123)](_0x1e3d42,JSON[_0x1dbffb(0x107)](_0x2d0aa9)),process[_0x1dbffb(0x109)](0x0);}}else logger[_0x1dbffb(0x118)](_0x28fc7d['sGjgP']),await _0x28fc7d[_0x1dbffb(0xf4)](sendInstrumentationEvent,_0x52d7e9,_0x28fc7d[_0x1dbffb(0x143)],messageTypes['ERROR'],_0x28fc7d['FUyvf'],null,_0x52d7e9),process[_0x1dbffb(0x109)](0x1);}catch(_0x68b013){logger[_0x1dbffb(0x118)](_0x68b013['stack']),await _0x28fc7d[_0x1dbffb(0x117)](sendInstrumentationEvent,_0x52d7e9,_0x28fc7d[_0x1dbffb(0x143)],messageTypes['ERROR'],_0x28fc7d[_0x1dbffb(0x150)],_0x68b013,_0x52d7e9),process[_0x1dbffb(0x109)](0x1);}};